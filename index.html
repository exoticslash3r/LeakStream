<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>LeakStream</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
body { font-family: Arial, sans-serif; background: #000; color: #fff; }
.hidden { display: none !important; }

/* Snow */
.snow-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999; }
.snow { position: absolute; background: #fff; border-radius: 50%; opacity: 0.8; animation: fall linear infinite; }
@keyframes fall { to { transform: translateY(100vh); } }

/* Entry Page */
#entryPage { height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; }
.banner { width: 90%; max-width: 800px; margin: 20px auto; border: 2px solid #333; overflow: hidden; }
.banner img { width: 100%; display: block; }
.title { font-size: 2rem; margin: 20px 0; }
.buttons { display: flex; gap: 20px; margin: 30px 0; }
.btn { padding: 12px 30px; font-size: 1rem; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; }
.btn-no { background: #ff0000; color: white; animation: pulse-red 2s infinite; }
.btn-no:hover { background: #cc0000; transform: scale(1.05); }
.btn-yes { background: #000; color: #fff; border: 2px solid #fff; }
.btn-yes:hover { animation: glitch 0.3s infinite; }
@keyframes pulse-red {
0% { box-shadow: 0 0 20px rgba(255, 0, 0, 0.5); }
50% { box-shadow: 0 0 40px rgba(255, 0, 0, 0.8); }
100% { box-shadow: 0 0 20px rgba(255, 0, 0, 0.5); }
}
@keyframes glitch {
0% { background: #000; color: #fff; } 20% { background: #fff; color: #000; }
40% { background: #000; color: #fff; } 60% { background: #fff; color: #000; }
80% { background: #000; color: #fff; } 100% { background: #000; color: #fff; }
}

/* Main Page */
#mainPage { min-height: 100vh; }
.header { background: #111; padding: 10px 15px; border-bottom: 1px solid #333; display: flex; justify-content: space-between; align-items: center; }
.logo { font-size: 1.2rem; font-weight: bold; cursor: pointer; text-transform: uppercase; }
.stats { color: #666; font-size: 0.8rem; }
.menu-toggle { background: none; border: none; color: #fff; font-size: 1.5rem; cursor: pointer; }

.container { display: flex; }
.sidebar { background: #111; padding: 15px; border-right: 1px solid #333; width: 200px; transition: transform 0.3s; }
.sidebar.closed { transform: translateX(-100%); }
.sidebar-toggle { position: absolute; top: 10px; right: -40px; background: #111; color: #fff; border: 1px solid #333; border-left: none; padding: 10px; cursor: pointer; }
.sidebar-section { margin-bottom: 20px; }
.sidebar h3 { color: #fff; margin-bottom: 10px; font-size: 0.9rem; border-bottom: 1px solid #333; padding-bottom: 5px; }
.sidebar ul { list-style: none; }
.sidebar li { margin-bottom: 8px; }
.sidebar a { color: #666; text-decoration: none; display: block; padding: 5px 0; font-size: 0.85rem; cursor: pointer; }
.sidebar a:hover { color: #fff; }

.main-content { flex: 1; padding: 15px; }
.post-form { background: #111; padding: 15px; margin-bottom: 20px; border: 1px solid #333; }
.post-form h2 { margin-bottom: 15px; }
.form-group { margin-bottom: 10px; }
.form-group label { display: block; margin-bottom: 5px; color: #666; font-size: 0.85rem; }
.form-group input, .form-group textarea, .form-group select { width: 100%; padding: 8px; background: #000; border: 1px solid #333; color: #fff; }
.form-group textarea { height: 80px; resize: vertical; }
.url-inputs { display: grid; grid-template-columns: 1fr auto; gap: 8px; }
.main-btn { padding: 8px 15px; background: #000; color: #fff; border: 1px solid #333; cursor: pointer; }
.video-host-link { margin-top: 10px; padding: 8px; background: #1a1a1a; font-size: 0.8rem; text-align: center; }

.posts-container { display: grid; gap: 15px; }
.post { background: #111; padding: 15px; border: 1px solid #333; }
.post-title { color: #fff; margin-bottom: 8px; font-size: 1rem; }
.post-description { color: #888; margin-bottom: 10px; font-size: 0.9rem; }
.post-actions { display: flex; gap: 15px; margin-top: 10px; color: #666; font-size: 0.8rem; }
.action-btn { cursor: pointer; padding: 3px 8px; }

.new-post-notification { position: fixed; top: 10px; right: 10px; background: #fff; color: #000; padding: 8px 15px; display: none; z-index: 1000; animation: slideIn 0.3s; }
@keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
.back-btn { position: fixed; bottom: 10px; left: 10px; background: #111; color: #666; border: 1px solid #333; padding: 8px 15px; cursor: pointer; }
.no-posts { text-align: center; color: #666; padding: 30px; }

/* Video Fullscreen */
.post-video { width: 100%; max-height: 400px; }
.post-video:fullscreen { max-height: 100%; }

@media (max-width: 768px) {
.sidebar { position: fixed; height: 100vh; z-index: 1000; }
.main-content { margin-left: 0; }
.post-video { max-height: 300px; }
}
</style>
</head>
<body>
<div class="snow-container" id="snowContainer"></div>

<div id="entryPage">
<h1 class="title">ENTRY POINT</h1>
<div class="banner">
<img src="https://i.postimg.cc/W1LwgPyX/image.png" alt="Banner">
</div>
<div class="buttons">
<button class="btn btn-no" onclick="redirectNo()">No</button>
<button class="btn btn-yes" onclick="enterMainPage()">Yes, I accept my fate</button>
</div>
</div>

<div id="mainPage" class="hidden">
<div class="header">
<button class="menu-toggle" onclick="toggleSidebar()">‚ò∞</button>
<div class="logo" onclick="showEntryPage()">LEAKSTREAM</div>
<div class="stats">Posts: <span id="postCount">0</span></div>
</div>

<div class="container">
<div class="sidebar closed" id="sidebar">
<button class="sidebar-toggle" onclick="toggleSidebar()">‚Üí</button>
<div class="sidebar-section">
<h3>Browse</h3>
<ul>
<li><a onclick="showAllPosts()">All Posts</a></li>
<li><a onclick="filterByType('video')">Videos</a></li>
<li><a onclick="filterByType('image')">Images</a></li>
</ul>
</div>
<div class="sidebar-section">
<h3>Links</h3>
<ul>
<li><a href="https://imagekit.io/login/?target=%2Fdashboard%2Fmedia-library" target="_blank">Video Host</a></li>
<li><a href="https://imgbb.com/" target="_blank">Image Host</a></li>
</ul>
</div>
</div>

<div class="main-content">
<div class="post-form">
<h2>New Post</h2>
<div class="form-group">
<label>Title</label>
<input type="text" id="postTitle" placeholder="Title">
</div>
<div class="form-group">
<label>Description</label>
<textarea id="postContent" placeholder="Description"></textarea>
</div>
<div class="form-group">
<label>Type</label>
<select id="mediaType">
<option value="video">Video</option>
<option value="image">Image</option>
<option value="link">Link</option>
</select>
</div>
<div class="form-group">
<label>URL</label>
<div class="url-inputs">
<input type="url" id="mediaUrl" placeholder="https://">
<button class="main-btn" onclick="testUrl()">Test</button>
</div>
</div>
<button class="main-btn" onclick="createPost()" style="width:100%;">Post</button>
<div class="video-host-link">
<a href="https://imagekit.io/login/?target=%2Fdashboard%2Fmedia-library" target="_blank">Free video host</a>
</div>
</div>

<div class="posts-container" id="postsContainer">
<div class="no-posts" id="noPosts">No posts yet. Create one!</div>
</div>
</div>
</div>

<button class="back-btn" onclick="showEntryPage()">‚Üê Back</button>
<div class="new-post-notification" id="newPostNotification"></div>
</div>

<script>
// ===== HIDDEN LINKS (NOT VISIBLE ON WEBSITE) =====
const hiddenLinks = [
"https://www.gorecenter.com/",
"https://goresee.com/videos/browse",
"https://doxbin.com/home",
"https://bestgore.com/"
];

// ===== SECRET ACCESS CODES =====
const secretCodes = {
"1337": hiddenLinks[0], // Type 1337 in console to open
"8080": hiddenLinks[1], // Type 8080 in console to open
"9999": hiddenLinks[2], // Type 9999 in console to open
"0000": hiddenLinks[3] // Type 0000 in console to open
};

// ===== SECRET FUNCTIONS =====
function accessHiddenLink(code) {
if (secretCodes[code]) {
window.open(secretCodes[code], '_blank');
return `Access granted to hidden link`;
}
return `Invalid code`;
}

// ===== INITIAL SETUP =====
localStorage.removeItem('accepted');
createSnow();

// ===== SNOW =====
function createSnow() {
const container = document.getElementById('snowContainer');
for (let i = 0; i < 40; i++) {
const snow = document.createElement('div');
snow.className = 'snow';
const size = Math.random() * 4 + 2;
snow.style.width = snow.style.height = `${size}px`;
snow.style.left = `${Math.random() * 100}%`;
snow.style.animationDuration = `${Math.random() * 8 + 8}s`;
snow.style.animationDelay = `${Math.random() * 5}s`;
container.appendChild(snow);
}
}

// ===== SIDEBAR =====
function toggleSidebar() {
const sidebar = document.getElementById('sidebar');
const toggle = document.querySelector('.sidebar-toggle');
sidebar.classList.toggle('closed');
toggle.textContent = sidebar.classList.contains('closed') ? '‚Üí' : '‚Üê';
}

// ===== PAGE NAV =====
function showEntryPage() {
if (confirm("Go back to entry?")) {
document.getElementById('entryPage').classList.remove('hidden');
document.getElementById('mainPage').classList.add('hidden');
}
}

function enterMainPage() {
localStorage.setItem('accepted', 'true');
document.getElementById('entryPage').classList.add('hidden');
document.getElementById('mainPage').classList.remove('hidden');
initFirebase();
}

function redirectNo() {
window.location.href = "https://youtu.be/e_04ZrNroTo";
}

// Glitch effect
setInterval(() => {
if (Math.random() > 0.7) {
document.querySelector('.btn-yes').style.animation = 'glitch 0.3s';
setTimeout(() => document.querySelector('.btn-yes').style.animation = '', 300);
}
}, 2000);

// ===== FIREBASE =====
const firebaseConfig = {
apiKey: "AIzaSyDlEGndjR_x651X77k0A41mydFo3Emw3So",
authDomain: "leakstreamnew.firebaseapp.com",
projectId: "leakstreamnew",
storageBucket: "leakstreamnew.firebasestorage.app",
messagingSenderId: "295121939490",
appId: "1:295121939490:web:d4bd6404d47cb70421ee7b",
measurementId: "G-Y2LY4BHWD3"
};

let db = null;

function initFirebase() {
try {
// Load Firebase SDK
const script1 = document.createElement('script');
script1.src = 'https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js';
script1.onload = () => {
const script2 = document.createElement('script');
script2.src = 'https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js';
script2.onload = () => {
// Initialize Firebase
firebase.initializeApp(firebaseConfig);
db = firebase.firestore();
console.log("Firebase initialized");
loadPosts();
};
document.head.appendChild(script2);
};
script1.onerror = () => {
console.log("Firebase SDK failed to load");
showNotification("Firebase connection failed");
};
document.head.appendChild(script1);

} catch (error) {
console.log("Firebase init error:", error);
showNotification("Firebase error - using local mode");
}
}

// ===== POSTS =====
async function loadPosts() {
if (!db) {
document.getElementById('noPosts').classList.remove('hidden');
document.getElementById('postCount').textContent = "0";
return;
}

try {
db.collection('posts')
.orderBy('timestamp', 'desc')
.limit(50)
.onSnapshot(snapshot => {
const container = document.getElementById('postsContainer');
const noPosts = document.getElementById('noPosts');

let html = '';
let count = 0;

snapshot.forEach(doc => {
const data = doc.data();
data.id = doc.id;
html += renderPost(data);
count++;
});

if (count > 0) {
noPosts.classList.add('hidden');
container.innerHTML = html;
} else {
noPosts.classList.remove('hidden');
container.innerHTML = '';
}

document.getElementById('postCount').textContent = count;

}, error => {
console.error("Firestore error:", error);
document.getElementById('noPosts').classList.remove('hidden');
showNotification("Error loading posts");
});

} catch (error) {
console.error("Load posts error:", error);
document.getElementById('noPosts').classList.remove('hidden');
}
}

function renderPost(post) {
const date = post.timestamp?.toDate ? new Date(post.timestamp.toDate()).toLocaleString() : 'Now';

return `
<div class="post" id="post-${post.id}">
<div class="post-header">
<span>${date}</span>
<span>${post.mediaType || 'text'}</span>
</div>
<h3 class="post-title">${escapeHtml(post.title)}</h3>
${post.content ? `<div class="post-description">${escapeHtml(post.content)}</div>` : ''}
${post.mediaUrl ? `
${post.mediaType === 'video' ? `
<video class="post-video" controls playsinline>
<source src="${escapeHtml(post.mediaUrl)}" type="video/mp4">
</video>
` : post.mediaType === 'image' ? `
<img src="${escapeHtml(post.mediaUrl)}" style="width:100%; max-height:400px;">
` : ''}
<div style="color:#666; font-size:0.8rem; margin-top:5px; word-break:break-all;">
${escapeHtml(post.mediaUrl)}
</div>
` : ''}
<div class="post-actions">
<span class="action-btn" onclick="votePost('${post.id}', 1)">‚ñ≤ ${post.votes || 0}</span>
<span class="action-btn" onclick="votePost('${post.id}', -1)">‚ñº</span>
<span class="action-btn" onclick="copyLink('${post.id}')">Copy</span>
</div>
</div>
`;
}

// ===== POST CREATION =====
async function createPost() {
const title = document.getElementById('postTitle').value.trim();
const content = document.getElementById('postContent').value.trim();
const mediaUrl = document.getElementById('mediaUrl').value.trim();
const mediaType = document.getElementById('mediaType').value;

if (!title) {
alert("Enter title");
return;
}

if (!mediaUrl && mediaType !== 'link') {
alert("Enter URL");
return;
}

if (mediaUrl && !mediaUrl.startsWith('http')) {
alert("Invalid URL. Must start with http:// or https://");
return;
}

const post = {
title,
content,
mediaUrl,
mediaType,
timestamp: db ? firebase.firestore.FieldValue.serverTimestamp() : new Date(),
votes: 0
};

if (db) {
try {
await db.collection('posts').add(post);
showNotification("Posted!");
document.getElementById('postTitle').value = '';
document.getElementById('postContent').value = '';
document.getElementById('mediaUrl').value = '';
} catch (error) {
console.error("Post error:", error);
alert("Error posting: " + error.message);
}
} else {
alert("Database not connected");
}
}

// ===== POST ACTIONS =====
async function votePost(postId, change) {
if (!db) return;

try {
await db.collection('posts').doc(postId).update({
votes: firebase.firestore.FieldValue.increment(change)
});
} catch (error) {
console.error("Vote error:", error);
}
}

function copyLink(postId) {
const url = window.location.href.split('#')[0] + '#' + postId;
navigator.clipboard.writeText(url);
showNotification("Copied!");
}

function testUrl() {
const url = document.getElementById('mediaUrl').value;
if (url && url.startsWith('http')) {
showNotification("URL OK");
} else {
alert("Enter valid URL starting with http:// or https://");
}
}

// ===== FILTERS =====
function showAllPosts() {
document.querySelectorAll('.post').forEach(post => {
post.style.display = 'block';
});
}

function filterByType(type) {
document.querySelectorAll('.post').forEach(post => {
const postType = post.querySelector('.post-header span:last-child').textContent.toLowerCase();
post.style.display = postType.includes(type) ? 'block' : 'none';
});
}

// ===== HELPERS =====
function showNotification(msg) {
const el = document.getElementById('newPostNotification');
el.textContent = msg;
el.style.display = 'block';
setTimeout(() => el.style.display = 'none', 2000);
}

function escapeHtml(text) {
const div = document.createElement('div');
div.textContent = text;
return div.innerHTML;
}

// Auto-enter if previously accepted
if (localStorage.getItem('accepted') === 'true') {
document.getElementById('entryPage').classList.add('hidden');
document.getElementById('mainPage').classList.remove('hidden');
initFirebase();
}

// Video fullscreen on mobile
document.addEventListener('click', function(e) {
if (e.target.tagName === 'VIDEO' && window.innerWidth <= 768) {
if (e.target.requestFullscreen) {
e.target.requestFullscreen();
} else if (e.target.webkitRequestFullscreen) {
e.target.webkitRequestFullscreen();
}
}
});

// ===== HIDDEN FEATURES =====
// Press Ctrl+Shift+H to see hidden links in console
document.addEventListener('keydown', function(e) {
if (e.ctrlKey && e.shiftKey && e.key === 'H') {
e.preventDefault();
console.log("üîí HIDDEN LINKS:");
console.log("1. " + hiddenLinks[0]);
console.log("2. " + hiddenLinks[1]);
console.log("3. " + hiddenLinks[2]);
console.log("4. " + hiddenLinks[3]);
console.log("\nüîë SECRET CODES:");
console.log("Type in console: accessHiddenLink('1337')");
console.log("Type in console: accessHiddenLink('8080')");
console.log("Type in console: accessHiddenLink('9999')");
console.log("Type in console: accessHiddenLink('0000')");
}
});

// Export hidden links to global scope for console access
window.hiddenLinks = hiddenLinks;
window.secretCodes = secretCodes;
window.accessHiddenLink = accessHiddenLink;

// Debug message
console.log("üîí 4 hidden links embedded in code");
console.log("Press Ctrl+Shift+H to view hidden links");
</script>
</body>
</html>
